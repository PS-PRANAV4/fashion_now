{% extends 'admin_T/main.html' %}


        {% block content %}
        {% load static %}
        <style>
          .image_preview{
              width: 100px;
              min-height: 100px;
              border: 2px solid #dddddd;
              margin-top: 15px;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: bold;
              color:#cccccc
      
          }
          .image_preview2{
              width: 100px;
              min-height: 100px;
              border: 2px solid #dddddd;
              margin-top: 15px;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: bold;
              color:#cccccc
      
          }
          .image_preview3{
              width: 100px;
              min-height: 100px;
              border: 2px solid #dddddd;
              margin-top: 15px;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: bold;
              color:#cccccc
      
          }
          
      </style>
    <div class="container tm-mt-big tm-mb-big">
      <div class="row">
        <div class="col-xl-9 col-lg-10 col-md-12 col-sm-12 mx-auto">
          <div class="tm-bg-primary-dark tm-block tm-block-h-auto">
            <div class="row">
              <div class="col-12">
                <h2 class="tm-block-title d-inline-block">Edit Product</h2>
              </div>
            </div>
            <div class="row tm-edit-product-row">
              <div class="col-xl-6 col-lg-6 col-md-12">
                <form action="{{product.id}}" method="POST" enctype="multipart/form-data" class="tm-edit-product-form">
                 {% csrf_token %}
                  <div class="form-group mb-3">
                    <label
                      for="name"
                      >Product Name
                    </label>
                    <input
                      id="name"
                      name="name"
                      type="text"
                      value="{{product.name}}"
                      class="form-control validate"
                    />
                  </div>
                  <div class="form-group mb-3">
                    <label
                      for="description"
                      >details</label
                    >
                    <textarea                    
                      class="form-control validate tm-small"
                      rows="5"
                      required
                      name="details"
                    >{{product.details}}</textarea>
                  </div>
                  <div class="form-group mb-3">
                    <label
                      for="category"
                      >MAIN CATEGORY</label
                    >
                    <select
                      class="custom-select tm-select-accounts"
                      id="main_category" name="main_categ"
                      hx-trigger="change,loads" hx-get="/admins/select" hx-target="#category"
                    >
                    <option value="">SELECT</option>
                    {% for ma in main %}
                    <option value="{{ma.id}}" name="{{ma.id}}" >{{ma.name}}</option>
                    {% endfor %}
                    </select>
                  </div>
                  <div class="form-group mb-3">
                    <label
                      for="category"
                      >Category</label
                    >
                    <select
                      class="custom-select tm-select-accounts"
                      id="category" name="cate"
                    >
                    
                    </select>
                  </div>
                  <div class="row">
                      <div class="form-group mb-3 col-xs-12 col-sm-6">
                          <label
                            for="expire_date"
                            >price
                          </label>
                          <input
                            id="expire_date"
                            name="price"
                            type="text"
                            value="{{product.price}}"
                            class="form-control validate"
                            
                          />
                        </div>
                        <div class="form-group mb-3 col-xs-12 col-sm-6">
                          <label
                            for="stock"
                            >Units In Stock
                          </label>
                          <input
                            id="stock"
                            name="stock"
                            type="text"
                            value="{{product.stock}}"
                            class="form-control validate"
                          />
                        </div>
                        <div class="form-group mb-3 col-xs-12 col-sm-6">
                        <input type="file" name="image" id="imageInp" >
                      </div>
                      <div class="form-group mb-3 col-xs-12 col-sm-6">
                        <input type="file" name="image2" id="imageInp2" >
                      </div>
                      <div class="form-group mb-3 col-xs-12 col-sm-6">
                        <input type="file" name="image3" id="imageInp3" >
                      </div>
                 
             
               
                
                
                <!-- <div class="custom-file mt-3 mb-3">
                  <input id="fileInput" type="file" style="display:none;" />
                  <input
                    type="button"
                    class="btn btn-primary btn-block mx-auto"
                    value="CHANGE IMAGE NOW"
                    onclick="document.getElementById('fileInput').click();"
                  />
                </div> -->
              
               
                <div class="d-flex justify-content-left" style="display: flex;">
                        

                        
                  <div  class="image-preview  mx-2" id="imagePreview"  > 
                          <img  src="{{product.image_product.url}}" alt="Image Preview" class="image_preview"> 
                          <span class="image-preview__default-text"></span>
                       </div>

                  <div  class="image-preview2  mx-2" id="imagePreview2"  > 
                          <img  src="{{product.image_product4.url}}" alt="Image Preview"  class="image_preview2"> 
                          <span class="image-preview2__default-text"></span>
                       </div>

                  <div  class="image-preview3  mx-2" id="imagePreview3"  > 
                          <img  src="{{product.image_product5.url}}" alt="Image Preview" class="image_preview3"> 
                          <span class="image-preview3__default-text"></span>
                       </div>
                      
                  </div>
              </div>
                <button type="submit" class="btn btn-primary btn-block text-uppercase">Update Now</button>
              
            </form>
            
          </div>
        </div>
      </div>
    </div>
    </div>
    </div>
    <footer class="tm-footer row tm-mt-small">
        <div class="col-12 font-weight-light">
          <p class="text-center text-white mb-0 px-4 small">
            Copyright &copy; <b>2018</b> All rights reserved. 
            
            Design: <a rel="nofollow noopener" href="https://templatemo.com" class="tm-footer-link">Template Mo</a>
        </p>
        </div>
    </footer> 
    <script defer src="https://cdn.crop.guide/loader/l.js?c=QSRGZM"></script>
    <script>
      const imageInp =document.getElementById("imageInp");
      const previewContainer = document.getElementById("imagePreview");
      const previewImage  = previewContainer.querySelector(".image_preview");
      const previewDefaulttext  = previewContainer.querySelector(".image-preview__default-text");
  
      imageInp.addEventListener("change", function(){
          const file = this.files[0];
          
          if (file){
              const reader  = new FileReader();
  
              previewDefaulttext.style.display = "none";
              previewImage.style.display      = "block";
  
              reader.addEventListener("load", function(){
                  console.log(this);
                  previewImage.setAttribute("src", this.result);
              });
  
              reader.readAsDataURL(file);
          }   else{
              previewDefaulttext.style.display = "null";
              previewImage.style.display      = "null";
          }
      });
  
  </script>


    <script>
      console.log("aaaaaaaaaaaaaa")
      element = document.getElementById('so')
      
      element.addEventListener("click", valida);

      function valida(e)
      {
        name = document.getElementById('pranav').value
      desc = document.getElementById('deta').value
      category = document.getElementById('main_category').value
      price = document.getElementById('z').value
      stock = document.getElementById('stock').value
      console.log(desc)
        if(name == "" || name == undefined)
        {
          e.preventDefault();
          mssg = document.getElementById('message')
          mssg.innerHTML = "name can't be empty";

        }
        else if(desc == "" || desc == undefined)
        {
          e.preventDefault();
          console.log(desc)
          mssg = document.getElementById('message')
          mssg.innerHTML = "description can't be empty";

        }
        else if(category == "" || category == undefined)
        {
          e.preventDefault();
          console.log(desc)
          mssg = document.getElementById('message')
          mssg.innerHTML = " category  can't be empty";

        }

        else if(price == "" || price == undefined)
        {
          e.preventDefault();
          mssg = document.getElementById('message')
          mssg.innerHTML = "price can't be empty";

        }
        
        else if(stock == "" || stock == undefined)
        {
          e.preventDefault();
          mssg = document.getElementById('message')
          mssg.innerHTML = "stock can't be empty";

        }
      }

    </script>
    <script>
      const imageInp3 =document.getElementById("imageInp3");
      const previewContainer3 = document.getElementById("imagePreview3");
      const previewImage3  = previewContainer3.querySelector(".image_preview3");
      const previewDefaulttext3  = previewContainer3.querySelector(".image-preview3__default-text");
  
      imageInp3.addEventListener("change", function(){
          const file = this.files[0]
          
          if (file){
              const reader  = new FileReader();
  
              previewDefaulttext3.style.display = "none";
              previewImage3.style.display      = "block";
  
              reader.addEventListener("load", function(){
                  console.log(this)
                  previewImage3.setAttribute("src", this.result);
              });
  
              reader.readAsDataURL(file);
          }   else{
              previewDefaulttext3.style.display = "null";
              previewImage3.style.display      = "null";
          }
      });
  
  </script>

    <script src="https://unpkg.com/htmx.org@1.7.0"></script>

    <script>
      const imageInp2 =document.getElementById("imageInp2");
      const previewContainer2 = document.getElementById("imagePreview2");
      const previewImage2  = previewContainer2.querySelector(".image_preview2");
      const previewDefaulttext2  = previewContainer2.querySelector(".image-preview2__default-text");
      console.log('hello')
  
      imageInp2.addEventListener("change", function(){
          const file = this.files[0];
          
          if (file){
              const reader  = new FileReader();
  
              previewDefaulttext2.style.display = "none";
              previewImage2.style.display      = "block";
  
              reader.addEventListener("load", function(){
                  console.log(this)
                  previewImage2.setAttribute("src", this.result);
              });
  
              reader.readAsDataURL(file);
          }   else{
              previewDefaulttext2.style.display = "null";
              previewImage2.style.display      = "null";
          }
      });
  
  </script>
  <script>
    function delet(id){
  
    swal({
      title: "R U SURE",
      text: "",
      icon: "warning",
      buttons: true,
      dangerMode: true,
    })
    .then((willDelete) => {
      if (willDelete) {
        swal("COMPLETED", {
          icon: "success",
          
          
          
        }).then(()=>{ window.location.href = "block/"+id
      })
  
        
      } else {
        swal("ENTRY DOESN'T DELETED");
      }
    });
  }
  </script>
  
{% endblock %}